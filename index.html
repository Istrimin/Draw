<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draw</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="script.js" defer></script> 
</head>
<body>
    <div class="parent-container"> 
        <div class="container">
            <div class="button-column"> 
                <label for="imageInput">
                    <button id="customUploadButton" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üå∫</button>
                </label>
                <input type="file" id="imageInput" accept="image/*" style="display: none;"> 

                <button id="saveImageBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">üé¨ </button>
                <button id="eraser" title="–õ–∞—Å—Ç–∏–∫">üí©</button>
                <button id="undo" title="–û—Ç–º–µ–Ω–∏—Ç—å">‚ü≤  </button>
                <button id="redo" title="–ü–æ–≤—Ç–æ—Ä–∏—Ç—å">‚ü≥ </button>
                <button id="clear" title="–û—á–∏—Å—Ç–∏—Ç—å">üíÄ</button>                
                <button id="symmetry" title="–°–∏–º–º–µ—Ç—Ä–∏—è">ü¶ã</button> 
                <button id="thickenLinesBtn" title="–£—Ç–æ–ª—â–∏—Ç—å –≤—Å–µ –ª–∏–Ω–∏–∏">!</button>

                <div class="tools">
                    <div class="tools-column">
                        <input type="color" id="backgroundPicker" value="#ffffff" title="–¶–≤–µ—Ç —Ñ–æ–Ω–∞">
                        <input type="color" id="colorPicker" value="#000000" title="–¶–≤–µ—Ç –∫–∏—Å—Ç–∏">
                    </div>
                </div>
                <button id="changeCursorBtn" title="–°–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å–æ—Ä">üé®</button>
                <ul id="cursorList" style="display:none;">
                </ul>
                <button id="inviteFriends" title="–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π"> üë•</button> 
                <button id="addToFavorites" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">üìå</button>                 
                <button id="settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
            </div>
        </div>

        <div class="canvas-and-sliders"> 
            <div class="container"> 
                <canvas id="drawingCanvas" width="800" height="600"></canvas>
            </div>

            <div class="tools-column">
                <label for="opacity" title="–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å">üëª </label>
                <input type="range" id="opacity" min="1" max="100" value="100">
            </div>

            <div class="tools-column"> 
                <label for="brushSize" title="–†–∞–∑–º–µ—Ä –∫–∏—Å—Ç–∏">‚óØ </label>
                <input type="range" id="brushSize" min="1" max="100" value="1">
            </div>
        </div>
    </div>

    <script>
      vkBridge.send('VKWebAppInit');
      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫—É—Ä—Å–æ—Ä–æ–≤
      function showCursorList() {
        $('#cursorList').toggle(); 
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ "–°–º–µ–Ω–∏—Ç—å –∫—É—Ä—Å–æ—Ä"
      $('#changeCursorBtn').click(function() {
        showCursorList();
      });

      // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫—É—Ä—Å–æ—Ä–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ "cursors"
      $.ajax({
        url: 'cursors', // –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∫—É—Ä—Å–æ—Ä–∞–º–∏ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞)
        success: function(data) {
          // –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤)
          var cursors = data.split('\n'); 
          for (var i = 0; i < cursors.length; i++) {
            var cursorFile = cursors[i];
            if (cursorFile) { // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
              // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫—É—Ä—Å–æ—Ä–∞
              var listItem = $('<li><a href="#">' + cursorFile + '</a></li>');
              // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∫–ª–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞
              listItem.click(function(e) {
                e.preventDefault(); 
                var cursorUrl = 'cursors/' + $(this).text(); 
                canvas.style.cursor = 'url(' + cursorUrl + '), auto'; 
                $('#cursorList').hide(); 
              });
              // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞ –≤ —Å–ø–∏—Å–æ–∫ –∫—É—Ä—Å–æ—Ä–æ–≤
              $('#cursorList').append(listItem);
            }
          }
        }
      });
    </script>
</body>
</html>
